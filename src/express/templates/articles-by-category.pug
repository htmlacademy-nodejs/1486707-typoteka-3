extends layout.pug

block header-content
    include partials/header-main

block main-content
    main.articles-category
        h1 Бизнес
        section.articles-category__theme-list
            h2.visually-hidden Список тем
            ul.themes
                each category of categories
                    if (category.id === currentCategoryId)
                        li.themes__item
                            a.themes__item-link.themes__item-link--active #{category.name}
                                sup #{category.count}
                    else
                        li.themes__item
                            a.themes__item-link(href=`/articles/category/${category.id}`) #{category.name}
                                sup #{category.count}
        section.articles-category__list.preview
            h2.visually-hidden Список превью статей
            ul.preview__list
                each article of articles.current
                    li.preview__item
                        ul.preview__breadcrumbs
                            each category of article.categories
                                li.preview__breadcrumbs-item
                                    a.preview__breadcrumbs-link(href=`/articles/category/${category.id}`) #{category.name}
                        -
                        if (article.picture)
                            .preview__background
                               img.preview__background-image(src=`/img/${article.picture}` width='460' height='240' alt=article.title)
                        time.preview__time(datetime=article.createdAt) #{article.createdAt}
                        h3.preview__name
                            a.preview__name-link(href=`/articles/${article.id}`) #{article.announce}
                        p.preview__text #{article.text}
                        a.preview__comment(href=`/articles/${article.id}`)
                            | Комментарии
                            span.preview__cloud
                            b.preview__comment-count #{(article.comments.length) || 0}
        +pagination(page, totalPages, 2, `?`)
